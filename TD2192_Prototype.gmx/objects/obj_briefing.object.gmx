<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Register keyboard and set references
keyboard_register(id)

gamedata = instance_find(obj_currentgame,0)
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Briefing State Enum
enum BRIEFING
{
    banner,
    scr,
    dialogue,
    pic,
    fin
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Load mission titles
var file = file_text_open_read("msntitle.txt");
for (var i=1;i&lt;=59;i++)
{
    mission_title[i] = file_text_read_string(file)
    file_text_readln(file)
}
file_text_close(file)
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Load Dialogue
dialogue_data = ds_list_create()
dialogue_index = ds_list_create()

var line_num = 1;
if gamedata.current_mission &lt;= 20 then
    file = file_text_open_read("DIALOGUE.DAT")
else 
{
    if gamedata.current_mission &lt;= 40 then
        file = file_text_open_read("DIALOGU2.DAT")
    else 
        file = file_text_open_read("DIALOGU3.DAT")
}

while !file_text_eof(file)
{
    line = file_text_read_string(file)
    ds_list_add(dialogue_data,line)
    
    /* Make dialogue index, each entry is a new scene*/
    if ord(string_char_at(line,1)) == $06
        ds_list_add(dialogue_index, line_num)
        
    line_num+=1        
    file_text_readln(file)
}

file_text_close(file)

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Briefing Flow
if room == rm_brief
{
    brief[1,1] = BRIEFING.banner
    brief[1,2] = mission_title[1]
    brief[1,3] = BRIEFING.scr
    brief[1,4] = asset_get_index("sprite13_HANGAR")
    brief[1,5] = "upper hangar"
    brief[1,6] = "traffic department headquarters"
    brief[1,7] = "july 18 - 2192"
    brief[1,8] = BRIEFING.dialogue
    brief[1,9] = 0
    brief[1,10] = BRIEFING.fin
    
    brief[2,1] = BRIEFING.scr
    brief[2,2] = asset_get_index("sprite38_TDLAB")
    brief[2,3] = "operations coordinator's office"
    brief[2,4] = ""
    brief[2,5] = "later..."
    brief[2,6] = BRIEFING.dialogue
    brief[2,7] = 3
    brief[2,8] = BRIEFING.dialogue
    brief[2,9] = 4
    brief[2,10] = BRIEFING.fin
    
    brief[3,1] = BRIEFING.scr
    brief[3,2] = asset_get_index("sprite13_HANGAR")
    brief[3,3] = "upper hangar"
    brief[3,4] = "traffic department headquarters"
    brief[3,5] = "next day"
    brief[3,6] = BRIEFING.dialogue
    brief[3,7] = 8
    brief[3,8] = BRIEFING.fin
    
    brief[4,1] = BRIEFING.scr
    brief[4,2] = asset_get_index("sprite5_BRIEFING")
    brief[4,3] = "Td briefing auditorium"
    brief[4,4] = "that night"
    brief[4,5] = ""
    brief[4,6] = BRIEFING.dialogue
    brief[4,7] = 12
    brief[4,8] = BRIEFING.scr
    brief[4,9] = asset_get_index("sprite13_HANGAR")
    brief[4,10] = "Upper Hanger"
    brief[4,11] = "Traffic Department Headquarters"
    brief[4,12] = "Later"
    brief[4,13] = BRIEFING.dialogue
    brief[4,14] = 13
    brief[4,15] = BRIEFING.fin
    
    brief[5,1] = BRIEFING.scr
    brief[5,2] = asset_get_index("sprite40_VELSROOM")
    brief[5,3] = "Quarters of Lt. Velasquez"
    brief[5,4] = "where she sleeps uneasily"
    brief[5,5] = ""
    brief[5,6] = BRIEFING.dialogue
    brief[5,7] = 16
    brief[5,8] = BRIEFING.scr
    brief[5,9] = asset_get_index("sprite37_SOFFICE")
    brief[5,10] = "commander satairs office"
    brief[5,11] = "traffic department headquarters"
    brief[5,12] = "5 radians later"
    brief[5,13] = BRIEFING.dialogue
    brief[5,14] = 17
    brief[5,15] = BRIEFING.dialogue
    brief[5,16] = 18
    brief[5,17] = BRIEFING.scr
    brief[5,18] = asset_get_index("sprite13_HANGAR")
    brief[5,19] = "Upper Hanger"
    brief[5,20] = "Traffic Department Headquarters"
    brief[5,21] = "Next Morning"
    brief[5,22] = BRIEFING.dialogue
    brief[5,23] = 19
    brief[5,24] = BRIEFING.fin
    
    //Default none
    for (var i=6;i&lt;=60;i++)
        brief[i,1]=BRIEFING.fin
    
    /* Minimum template mission
    brief[,1] = BRIEFING.scr
    brief[,2] = asset_get_index("sprite13_HANGAR")
    brief[,3] = "Line 1"
    brief[,4] = "Line 2"
    brief[,5] = "Line 3"
    brief[,6] = BRIEFING.dialogue
    brief[,7] = 1
    brief[,8] = BRIEFING.fin
    */
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Debriefing Flow
if room == rm_debrief
{
    brief[1,1] = BRIEFING.scr
    brief[1,2] = asset_get_index("sprite13_HANGAR")
    brief[1,3] = "upper hangar"
    brief[1,4] = "traffic department headquarters"
    brief[1,5] = "5 radians later"
    brief[1,6] = BRIEFING.dialogue
    brief[1,7] = 1
    brief[1,8] = BRIEFING.scr
    brief[1,9] = asset_get_index("sprite37_SOFFICE")
    brief[1,10] = "commander satairs office"
    brief[1,11] = "traffic department headquarters"
    brief[1,12] = "25 radians later"
    brief[1,13] = BRIEFING.dialogue
    brief[1,14] = 2
    brief[1,15] = BRIEFING.fin
    
    brief[2,1] = BRIEFING.scr
    brief[2,2] = asset_get_index("sprite13_HANGAR")
    brief[2,3] = "upper hangar"
    brief[2,4] = "traffic department headquarters"
    brief[2,5] = "after mission"
    brief[2,6] = BRIEFING.dialogue
    brief[2,7] = 5
    brief[2,8] = BRIEFING.scr
    brief[2,9] = asset_get_index("sprite37_SOFFICE")
    brief[2,10] = "commander satairs office"
    brief[2,11] = "traffic department headquarters"
    brief[2,12] = "5 radians later"
    brief[2,13] = BRIEFING.dialogue
    brief[2,14] = 6
    brief[2,15] = BRIEFING.scr
    brief[2,16] = asset_get_index("sprite0_VOFFICE")
    brief[2,17] = "colonel wolstencrofts office"
    brief[2,18] = "vulture command institute"
    brief[2,19] = ""
    brief[2,20] = BRIEFING.dialogue
    brief[2,21] = 7
    brief[2,22] = BRIEFING.fin
    
    brief[3,1] = BRIEFING.scr
    brief[3,2] = asset_get_index("sprite13_HANGAR")
    brief[3,3] = "upper hangar"
    brief[3,4] = "traffic department headquarters"
    brief[3,5] = "after mission"
    brief[3,6] = BRIEFING.dialogue
    brief[3,7] = 10
    brief[3,8] = BRIEFING.scr
    brief[3,9] = asset_get_index("sprite0_VOFFICE")
    brief[3,10] = "colonel wolstencrofts office"
    brief[3,11] = "vulture command institute"
    brief[3,12] = ""
    brief[3,13] = BRIEFING.dialogue
    brief[3,14] = 11
    brief[3,15] = BRIEFING.fin

    brief[4,1] = BRIEFING.scr
    brief[4,2] = asset_get_index("sprite13_HANGAR")
    brief[4,3] = "upper hangar"
    brief[4,4] = "traffic department headquarters"
    brief[4,5] = "after mission"
    brief[4,6] = BRIEFING.dialogue
    brief[4,7] = 14
    brief[4,8] = BRIEFING.scr
    brief[4,9] = asset_get_index("sprite0_VOFFICE")
    brief[4,10] = "colonel wolstencrofts office"
    brief[4,11] = "vulture command institute"
    brief[4,12] = "next morning"
    brief[4,13] = BRIEFING.dialogue
    brief[4,14] = 15
    brief[4,15] = BRIEFING.fin    
    
    brief[5,1] = BRIEFING.scr
    brief[5,2] = asset_get_index("sprite13_HANGAR")
    brief[5,3] = "upper hangar"
    brief[5,4] = "traffic department headquarters"
    brief[5,5] = "after mission"
    brief[5,6] = BRIEFING.dialogue
    brief[5,7] = 102
    brief[5,8] = BRIEFING.scr
    brief[5,9] = asset_get_index("sprite0_VOFFICE")
    brief[5,10] = "colonel wolstencrofts office"
    brief[5,11] = "vulture command institute"
    brief[5,12] = ""
    brief[5,13] = BRIEFING.dialogue
    brief[5,14] = 20
    brief[5,15] = BRIEFING.fin        
    
    //Default none
    for (var i=6;i&lt;=60;i++)
        brief[i,1]=BRIEFING.fin

}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Init
brief_state = -1
brief_phase = 1

briefing_next()



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Unregister keyboard and free data structures
keyboard_deregister(id)

ds_list_destroy(dialogue_data)
ds_list_destroy(dialogue_index)


</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Clean up children (if any)
with obj_banner
    instance_destroy()

with obj_dialogue
    instance_destroy()

with obj_scrloader
    instance_destroy()

with obj_picloader
    instance_destroy()
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Next room
//if room == rm_brief then room_goto(rm_mission)
if room == rm_brief then 
{
    var obj = instance_create(0,0,obj_missionskip);
    obj.mission_title = string_upper(mission_title[gamedata.current_mission])
}

if room == rm_debrief then room_goto(rm_mainmenu);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Briefing State Transitions
switch brief_state
{
    case BRIEFING.banner:
    {
        if !instance_exists(obj_banner)
        {
            var ban = instance_create(0,0,obj_banner);
            ban.banner_text = string_upper(brief[gamedata.current_mission,brief_phase])
            brief_phase+=1
        }
    } break;
    
    case BRIEFING.scr:
    {
        if !instance_exists(obj_scrloader)
        {
            var obj_scr = instance_create(0,0,obj_scrloader);
            obj_scr.screen_sprite = brief[gamedata.current_mission,brief_phase]
            brief_phase+=1
            obj_scr.line1 = string_upper(brief[gamedata.current_mission,brief_phase])
            brief_phase+=1
            obj_scr.line2 = string_upper(brief[gamedata.current_mission,brief_phase])
            brief_phase+=1
            obj_scr.line3 = string_upper(brief[gamedata.current_mission,brief_phase])
            brief_phase+=1   
        }
    } break;
    
    case BRIEFING.dialogue:
    {
        if !instance_exists(obj_dialogue)
        {
            var obj_dlg = instance_create(0,0,obj_dialogue);
            obj_dlg.current_scene = brief[gamedata.current_mission,brief_phase]
            brief_phase+=1
            
            obj_dlg.current_line = ds_list_find_value(dialogue_index,obj_dlg.current_scene)
        }
    } break;
    
    case BRIEFING.pic:
    {
        if !instance_exists(obj_picloader)
        {
            var obj_scr = instance_create(0,0,obj_picloader);
            obj_scr.screen_sprite = brief[gamedata.current_mission,brief_phase]
            brief_phase+=1   
        }
    } break;
    
    case BRIEFING.fin: instance_destroy(); break;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Process Input
if ds_exists(command_stack,ds_type_stack) &amp;&amp; !ds_stack_empty(command_stack)
{
    var cmd = ds_stack_pop(command_stack);
    
    switch cmd
    {
        case "escape": instance_destroy(); break;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
