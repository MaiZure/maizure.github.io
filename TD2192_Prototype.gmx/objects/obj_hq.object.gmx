<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>BLK1</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Init variables

/* Overall mission variables */
night = false
player_kills = 0
player_ship_type = SHIPTYPE.hornet

/* ship handles */
player = 0

for (var i=0;i&lt;21;i++)
    npc_ship[i]=0

/** END INITIAL DEVELOPMENT **?
/* Mission ending variables */    
x = 107*32
y = 106*32
spr_frame_l = 68
spr_frame_c = 69
spr_frame_r = 70

/* Mission settings */
mission_complete = false
mission_dead = false
update_mission = false

last_wave = 0
for (var i=0; i&lt;10; i++)
    wave_messages[i]=""
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Data Structures
target_list = ds_list_create() /* holds list of player direction-finder targets */

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Clean Data Structure
ds_list_destroy(target_list)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Update mission check
/* check for mission event update (Called from ship destruction end of last frame */
if update_mission
{
    if !instance_exists(player)
        mission_dead = true
        
    mission_check(gamedata.current_mission)
    update_mission = false
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Mission complete - check return to base
if mission_complete &amp;&amp; instance_exists(player)
{
    if map_pos(player.x) == map_pos(x)
    {
        if map_pos(player.y) == map_pos(y)
        {
            hud.fade_out = true
            with obj_ship_ai
                mode = AIMODE.inactive
            with obj_ship
            {
                speed = 0
                active = false
            }

            if player_kills &gt; 0 then
            {
                gamedata.current_mission_kills=player_kills
                gamedata.current_total_kills+=player_kills
                player_kills=0
            }
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Player died - end mission
if mission_dead
    hud.fade_out = true
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Change game data on mission end
if mission_dead 
{
    gamedata.current_mission--
    gamedata.current_mission_kills = 0
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Ensure destruction
instance_destroy()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Set references
gamedata = instance_find(obj_currentgame,0)
hud = instance_find(obj_hud,0)
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Load Ships

/* Create player ship */
var shp = ship_create(3450,3500,player_ship_type);
shp.is_player = true
player = shp

/* Find mission data file */
var file = file_text_open_read(get_mission_file(gamedata.current_mission))

if file == -1
    file = file_text_open_read("M1.MS1")
    

/* Creating ships and set their type */
var new_type, new_x, new_y;
var new_line, shift;

for (var i=0;i&lt;20;i++)
{
    new_line = file_text_read_string(file)
    shift = ord(string_char_at(new_line,1))-$20
    new_type = ord(string_char_at(new_line,2))+(shift*$60)-$20

    if new_type &lt; $0A 
        npc_ship[i]=ship_create(0,0,new_type)
    else
        npc_ship[i]=0
    file_text_readln(file)
}
/** STOP HERE UNTIL LATER IN THE VIDEO **/
/* get x waypoints */
for (var j=0;j&lt;20;j++)
{
    for (var i=0;i&lt;501;i++)
    {
        if npc_ship[j] &gt; 0
        {
            new_line = file_text_read_string(file)
            shift = ord(string_char_at(new_line,1))-$20
            new_x = ord(string_char_at(new_line,2))+(shift*$60)-$20
            npc_ship[j].ai.fixed_path_x[i] = new_x
        }
        file_text_readln(file)
        if new_x &lt; 0 then show_message(string(j)+","+string(i)+": " + string(new_x))
        
        if j == 19 &amp;&amp; i == 480 then i=501
    }
}

/* get y waypoints */
for (var j=0;j&lt;20;j++)
{
    for (var i=0;i&lt;501;i++)
    {
        if npc_ship[j] &gt; 0
        {
            new_line = file_text_read_string(file)
            shift = ord(string_char_at(new_line,1))-$20
            new_y = ord(string_char_at(new_line,2))+(shift*$60)-$20
            npc_ship[j].ai.fixed_path_y[i] = new_y
        }
        if new_y &lt; 0 then show_message(string(j)+","+string(i)+": " + string(new_y))
        file_text_readln(file)
        if j == 19 &amp;&amp; i == 480 then i=501
    }
}

file_text_close(file)

/* set initial position */
for (var i=0;i&lt;20;i++)
{
    if npc_ship[i] &gt; 0
    {
        npc_ship[i].ship_index = i
        npc_ship[i].x = npc_ship[i].ai.fixed_path_x[0]*32+16
        npc_ship[i].y = npc_ship[i].ai.fixed_path_y[0]*32+16
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Mission Initialize
mission_initialize(gamedata.current_mission)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw HQ covers
if spr_frame_l &gt; 0 then 
    draw_sprite_ext(BLK1,spr_frame_l,x-32,y,1,1,0,c_white,1)

draw_sprite_ext(BLK1,spr_frame_c,x,y,1,1,0,c_white,1)

if spr_frame_r &gt; 0 then 
    draw_sprite_ext(BLK1,spr_frame_r,x+32,y,1,1,0,c_white,1)
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
